# 🏥 환자 정보 관리 프로그램 (CRUD)

## 상세 설계 문서

> **프로젝트명**: Patient Management System  
> **버전**: 1.0  
> **작성일**: 2026.01.09  
> **데이터 출처**: [Kaggle - Healthcare Dataset](https://www.kaggle.com/datasets/prasad22/healthcare-dataset)

---

## 1. 프로젝트 개요

### 1.1 목적
병원/의료기관에서 환자 정보를 효율적으로 관리하기 위한 CRUD(Create, Read, Update, Delete) 시스템

### 1.2 주요 기능

| 기능 | 설명 | 단축키 |
|------|------|--------|
| **Create** | 새 환자 등록 | Ctrl+N |
| **Read** | 환자 목록 조회, 상세 정보 보기, 검색 | Ctrl+F |
| **Update** | 환자 정보 수정 | Ctrl+E |
| **Delete** | 환자 삭제 | Delete |
| **통계** | 환자 데이터 통계 분석 | Ctrl+S |

### 1.3 기술 스택
- **언어**: Python 3.x
- **GUI**: tkinter (Treeview, Toplevel)
- **데이터**: CSV 파일 (Kaggle 데이터셋 구조)

---

## 2. 데이터 구조

### 2.1 Kaggle Healthcare Dataset 컬럼 정의

| 컬럼명 | 설명 | 데이터 타입 | 예시 |
|--------|------|-------------|------|
| `patient_id` | 환자 고유 ID | str | "P001" |
| `name` | 환자 이름 | str | "홍길동" |
| `age` | 나이 | int | 45 |
| `gender` | 성별 | str | "Male" / "Female" |
| `blood_type` | 혈액형 | str | "A+", "B-", "O+", "AB-" |
| `medical_condition` | 진단명/질병 | str | "Diabetes", "Hypertension" |
| `date_of_admission` | 입원일 | str | "2026-01-09" |
| `doctor` | 담당 의사 | str | "Dr. 김철수" |
| `hospital` | 병원명 | str | "서울대병원" |
| `insurance_provider` | 보험사 | str | "국민건강보험" |
| `billing_amount` | 청구 금액 | float | 1500000.0 |
| `room_number` | 병실 번호 | int | 302 |
| `admission_type` | 입원 유형 | str | "Emergency", "Elective", "Urgent" |
| `discharge_date` | 퇴원일 | str | "2026-01-15" |
| `medication` | 처방약 | str | "Aspirin", "Metformin" |
| `test_results` | 검사 결과 | str | "Normal", "Abnormal", "Inconclusive" |

### 2.2 코드 값 정의

#### 성별 (Gender)
| 값 | 설명 |
|----|------|
| Male | 남성 |
| Female | 여성 |

#### 혈액형 (Blood Type)
| 값 | 설명 |
|----|------|
| A+, A- | A형 |
| B+, B- | B형 |
| O+, O- | O형 |
| AB+, AB- | AB형 |

#### 입원 유형 (Admission Type)
| 값 | 설명 |
|----|------|
| Emergency | 응급 입원 |
| Elective | 선택적 입원 (예정된 수술 등) |
| Urgent | 긴급 입원 |

#### 검사 결과 (Test Results)
| 값 | 설명 |
|----|------|
| Normal | 정상 |
| Abnormal | 비정상 |
| Inconclusive | 판정 불가 |

#### 진단명 (Medical Condition)
| 값 | 한글 | 설명 |
|----|------|------|
| Diabetes | 당뇨병 | 혈당 조절 장애 |
| Hypertension | 고혈압 | 혈압 상승 |
| Asthma | 천식 | 호흡기 질환 |
| Obesity | 비만 | 체중 관련 |
| Arthritis | 관절염 | 관절 염증 |
| Cancer | 암 | 악성 종양 |

---

## 3. CRUD 기능 상세 설계

### 3.1 Create (환자 등록)

```python
def create_patient(patient_data: dict) -> bool:
    """
    새 환자 등록
    
    Args:
        patient_data: {
            "name": str,
            "age": int,
            "gender": str,
            "blood_type": str,
            "medical_condition": str,
            "doctor": str,
            "hospital": str,
            "insurance_provider": str,
            "room_number": int,
            "admission_type": str,
            "medication": str
        }
    
    Returns:
        bool: 등록 성공 여부
    
    Process:
        1. 입력값 유효성 검사
        2. 고유 ID 자동 생성 (P001, P002, ...)
        3. 입원일 자동 설정 (현재 날짜)
        4. CSV 파일에 추가
    """
```

#### 유효성 검사 규칙
| 필드 | 규칙 |
|------|------|
| name | 필수, 2자 이상 |
| age | 필수, 0~120 사이 |
| gender | 필수, Male/Female |
| blood_type | 필수, 8개 혈액형 중 하나 |
| room_number | 선택, 100~999 사이 |

---

### 3.2 Read (환자 조회)

#### 3.2.1 전체 목록 조회
```python
def get_all_patients() -> list:
    """모든 환자 목록 반환"""
```

#### 3.2.2 ID로 조회
```python
def get_patient_by_id(patient_id: str) -> dict:
    """특정 환자 상세 정보 반환"""
```

#### 3.2.3 검색
```python
def search_patients(keyword: str, field: str = "all") -> list:
    """
    환자 검색
    
    Args:
        keyword: 검색어
        field: 검색 필드 ("all", "name", "medical_condition", "doctor")
    
    Returns:
        list: 검색 결과 리스트
    """
```

---

### 3.3 Update (환자 정보 수정)

```python
def update_patient(patient_id: str, updated_data: dict) -> bool:
    """
    환자 정보 수정
    
    Args:
        patient_id: 수정할 환자 ID
        updated_data: 수정할 데이터 딕셔너리
    
    Returns:
        bool: 수정 성공 여부
    
    Process:
        1. 환자 존재 확인
        2. 입력값 유효성 검사
        3. CSV 파일 업데이트
    """
```

---

### 3.4 Delete (환자 삭제)

```python
def delete_patient(patient_id: str) -> bool:
    """
    환자 삭제
    
    Args:
        patient_id: 삭제할 환자 ID
    
    Returns:
        bool: 삭제 성공 여부
    
    Process:
        1. 삭제 확인 다이얼로그
        2. CSV 파일에서 제거
    """
```

---

## 4. UI/UX 설계

### 4.1 메인 화면 레이아웃

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    🏥 환자 정보 관리 시스템                               │
├─────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │ 🔍 검색: [                    ] [검색 필드 ▼] [검색]  [초기화]   │   │
│  └─────────────────────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │ ID    │ 이름   │ 나이 │ 성별 │ 혈액형 │ 진단명    │ 담당의  │...│   │
│  ├───────┼────────┼──────┼──────┼────────┼───────────┼─────────┼───│   │
│  │ P001  │ 홍길동 │  45  │ 남성 │  A+    │ Diabetes  │ Dr.김   │...│   │
│  │ P002  │ 김영희 │  32  │ 여성 │  B+    │ Asthma    │ Dr.이   │...│   │
│  │ P003  │ 이철수 │  58  │ 남성 │  O-    │ Cancer    │ Dr.박   │...│   │
│  │ ...   │ ...    │ ...  │ ...  │ ...    │ ...       │ ...     │...│   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                          [◀] 1/5 [▶]   │
├─────────────────────────────────────────────────────────────────────────┤
│  [➕ 환자 등록]  [📝 정보 수정]  [🗑️ 삭제]  [📊 통계]  [📋 상세보기]     │
└─────────────────────────────────────────────────────────────────────────┘
│  상태바: 총 환자 수: 150명 | 오늘 입원: 5명 | 마지막 업데이트: 15:30    │
└─────────────────────────────────────────────────────────────────────────┘
```

### 4.2 환자 등록 팝업

```
┌───────────────────────────────────────────┐
│         ➕ 새 환자 등록                    │
├───────────────────────────────────────────┤
│                                           │
│  ─── 기본 정보 ───                        │
│  이름:     [                    ]         │
│  나이:     [    ] 세                      │
│  성별:     ○ 남성  ○ 여성                │
│  혈액형:   [선택 ▼]                       │
│                                           │
│  ─── 의료 정보 ───                        │
│  진단명:   [선택 ▼]                       │
│  담당의:   [                    ]         │
│  병원:     [                    ]         │
│  병실:     [    ]                         │
│  입원유형: [선택 ▼]                       │
│                                           │
│  ─── 기타 정보 ───                        │
│  보험사:   [                    ]         │
│  처방약:   [                    ]         │
│                                           │
│        [등록]           [취소]            │
└───────────────────────────────────────────┘
```

### 4.3 환자 상세 정보 팝업

```
┌───────────────────────────────────────────┐
│      📋 환자 상세 정보 - P001             │
├───────────────────────────────────────────┤
│                                           │
│  ┌─────────────────────────────────────┐  │
│  │ 👤 홍길동 (45세, 남성)              │  │
│  │    혈액형: A+                       │  │
│  └─────────────────────────────────────┘  │
│                                           │
│  📅 입원 정보                             │
│  ├─ 입원일: 2026-01-05                   │
│  ├─ 퇴원일: -                            │
│  ├─ 입원유형: Emergency                  │
│  └─ 병실: 302호                          │
│                                           │
│  🩺 의료 정보                             │
│  ├─ 진단명: Diabetes                     │
│  ├─ 담당의: Dr. 김철수                   │
│  ├─ 처방약: Metformin                    │
│  └─ 검사결과: Normal                     │
│                                           │
│  💰 비용 정보                             │
│  ├─ 보험사: 국민건강보험                 │
│  └─ 청구금액: ₩1,500,000                 │
│                                           │
│           [수정]       [닫기]             │
└───────────────────────────────────────────┘
```

### 4.4 색상 테마

| 용도 | 색상 코드 | 설명 |
|------|-----------|------|
| 배경 | `#f0f4f8` | 밝은 회색-파랑 |
| 헤더 | `#1e3a5f` | 진한 네이비 |
| 버튼 (기본) | `#3498db` | 파란색 |
| 버튼 (등록) | `#27ae60` | 초록색 |
| 버튼 (삭제) | `#e74c3c` | 빨간색 |
| 버튼 (수정) | `#f39c12` | 주황색 |
| 테이블 헤더 | `#34495e` | 짙은 회색 |
| 테이블 행 (홀수) | `#ffffff` | 흰색 |
| 테이블 행 (짝수) | `#ecf0f1` | 밝은 회색 |

---

## 5. 클래스 설계

### 5.1 클래스 다이어그램

```
┌─────────────────────────────────────┐
│             Patient                 │
├─────────────────────────────────────┤
│ - patient_id: str                   │
│ - name: str                         │
│ - age: int                          │
│ - gender: str                       │
│ - blood_type: str                   │
│ - medical_condition: str            │
│ - date_of_admission: str            │
│ - doctor: str                       │
│ - hospital: str                     │
│ - insurance_provider: str           │
│ - billing_amount: float             │
│ - room_number: int                  │
│ - admission_type: str               │
│ - discharge_date: str               │
│ - medication: str                   │
│ - test_results: str                 │
├─────────────────────────────────────┤
│ + to_dict() -> dict                 │
│ + from_dict(data: dict) -> Patient  │
│ + validate() -> bool                │
│ + get_display_info() -> str         │
└─────────────────────────────────────┘
            │
            │ manages
            ▼
┌─────────────────────────────────────┐
│         PatientManager              │
├─────────────────────────────────────┤
│ - file_path: str                    │
│ - patients: list[Patient]           │
├─────────────────────────────────────┤
│ + create(data: dict) -> str         │
│ + read_all() -> list                │
│ + read_by_id(id: str) -> Patient    │
│ + search(keyword, field) -> list    │
│ + update(id: str, data: dict) -> bool│
│ + delete(id: str) -> bool           │
│ + get_statistics() -> dict          │
│ + generate_id() -> str              │
│ + save_to_file() -> bool            │
│ + load_from_file() -> bool          │
└─────────────────────────────────────┘
            │
            │ uses
            ▼
┌─────────────────────────────────────┐
│      PatientManagementApp (GUI)     │
├─────────────────────────────────────┤
│ - window: Tk                        │
│ - manager: PatientManager           │
│ - tree: Treeview                    │
├─────────────────────────────────────┤
│ + create_widgets()                  │
│ + refresh_table()                   │
│ + show_create_dialog()              │
│ + show_update_dialog()              │
│ + show_detail_dialog()              │
│ + delete_selected()                 │
│ + search_patients()                 │
│ + show_statistics()                 │
└─────────────────────────────────────┘
```

---

## 6. 파일 구조

```
patient_project/
├── data/
│   ├── patients.csv           # 환자 데이터 저장
│   └── sample_data.csv        # Kaggle 샘플 데이터
├── src/
│   ├── main.py                # 메인 GUI 프로그램
│   ├── patient.py             # Patient 클래스
│   └── patient_manager.py     # PatientManager 클래스
├── docs/
│   └── 설계문서.md             # 상세 설계 문서
└── README.md                  # 프로젝트 설명
```

---

## 7. 통계 기능

### 7.1 제공 통계

| 통계 항목 | 설명 |
|-----------|------|
| 총 환자 수 | 등록된 전체 환자 수 |
| 성별 분포 | 남성/여성 비율 |
| 연령대별 분포 | 10대, 20대, ... |
| 진단명별 분포 | 질병별 환자 수 |
| 입원 유형별 분포 | Emergency/Elective/Urgent |
| 혈액형별 분포 | A/B/O/AB 비율 |
| 검사 결과 분포 | Normal/Abnormal/Inconclusive |
| 평균 청구 금액 | 전체 평균 비용 |

---

## 8. 참고 자료

- **데이터셋**: [Kaggle - Healthcare Dataset](https://www.kaggle.com/datasets/prasad22/healthcare-dataset)
- **데이터 특성**: 합성 데이터 (Faker 라이브러리로 생성)
- **레코드 수**: 원본 약 10,000건 (샘플 100건 사용)

---

> 📝 **다음 단계**: 코드 구현 진행
